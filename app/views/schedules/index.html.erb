<div class="max-w-2xl mx-auto p-4">
  <h1 class="text-xl font-bold mb-6">予定一覧</h1>

  <!-- 予定追加ボタン -->
  <%= link_to "＋ 予定を追加",
      new_schedule_path,
      data: { turbo_frame: "modal" },
      class: "inline-block bg-teal-500 text-white px-4 py-2 rounded mb-6" %>

  <!-- モーダル表示領域 -->
  <turbo-frame id="modal"></turbo-frame>

  <% if @schedules.any? %>
    <ul class="space-y-3 mt-4">
      <% @schedules.each do |schedule| %>
        <li class="bg-white shadow rounded p-4">

          <!-- テンプレート名 -->
          <p class="font-semibold">
            <%= schedule.schedule_template&.title || "未分類" %>
          </p>

          <!-- 日時 -->
          <p class="text-sm text-gray-600 mt-1">
            <%= l schedule.scheduled_at, format: :long %>
          </p>

          <!-- 通知 -->
          <p class="text-sm text-gray-600">
            通知：
            <%= schedule.notification_before_minutes.present? ?
                "#{schedule.notification_before_minutes}分前" :
                "なし" %>
          </p>

          <!-- ステータス -->
          <p class="text-sm mt-1">
            状態：
            <span class="font-medium">
              <%= schedule.status %>
            </span>
          </p>

          <!-- 操作 -->
          <div class="mt-3 flex gap-4 text-sm">
            <!-- 編集ボタン（モーダルで開く） -->
            <%= link_to "編集",
                edit_schedule_path(schedule),
                data: { turbo_frame: "modal" },
                class: "text-blue-600" %>

            <!-- 削除ボタン -->
            <%= link_to "削除",
                schedule_path(schedule),
                data: { turbo_method: :delete, turbo_confirm: "削除しますか？" },
                class: "text-red-600" %>
          </div>

        </li>
      <% end %>
    </ul>
  <% else %>
    <!-- 空状態 -->
    <p class="text-gray-500 mt-8 text-center">
      まだ予定がありません
    </p>
  <% end %>
</div>

